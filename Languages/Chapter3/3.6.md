# 3.6 多维数组

​	可以理解多维数组为数组的数组，就是一个数组的每个元素就是一个数组。

```c++
int a[3][4];	// 大小为3的数组，每个元素是含有4个整数的数组

// 大小为10的数组，它的每个元素都是大小为20道德数组
// 这些数组的元素是含有30个整数的数组
int arr[10][20][30] = {0};
```

### 多维数组的初始化

```c++
int ia[3][4] = {
    {0, 1, 2, 3},
    {4, 5, 6, 7},
    {8, 9, 10, 11}
}

// 等价于 int ia[3][4] = {0,1,2,3,4,5,6,7,8,9,10,11};
// ia[0][0] = 0; ia[0][1] = 1; ia[0][2] = 2; ia[0][3] = 3;
// ia[1][0] = 4; ia[1][1] = 5; ia[1][2] = 6; ia[1][3] = 7;
// ia[2][0] = 8; ia[2][1] = 9; ia[2][2] = 10; ia[2][3] = 11;
```

```c++
// 显示初始化每行的首元素。
int ia[3][4] = {{0},{4},{8}};

// 等价于
// ia[0][0] = 0; ia[0][1] = 0; ia[0][2] = 0; ia[0][3] = 0;
// ia[1][0] = 4; ia[1][1] = 0; ia[1][2] = 0; ia[1][3] = 0;
// ia[2][0] = 8; ia[2][1] = 0; ia[2][2] = 0; ia[2][3] = 0;
```

```c++
// 显示化初始化第一行，其他元素执行值初始化
int ix[3][4] = {0,3,6,9}

// 等价于
// ia[0][0] = 0; ia[0][1] = 3; ia[0][2] = 6; ia[0][3] = 9;
// ia[1][0] = 0; ia[1][1] = 0; ia[1][2] = 0; ia[1][3] = 0;
// ia[2][0] = 0; ia[2][1] = 0; ia[2][2] = 0; ia[2][3] = 0;
```

### 多维数组的下标引用

可以使用下标运算符来访问多维数组的元素，此时数组的每个维度对应一个下标运算符。

```c++
int a[3][4];
int arr[10][20][30] = {0};

a[2][3] = arr[0][0][0];
int (&row)[4] = ia[1];	// 把row绑定到ia的第二个元素数组上，即row指向a[1]地址
```

### 使用范围 for 语句处理多维数组

```c++
size_t cnt = 0;
for(auto &row : ia)
{
    for(auto &col:row)
    {
        col = cnt++;
    }
}
```

使用范围 for 语句处理多维数组，除了最内层的循坏外，其他所以循坏的控制变量都应该是引用类型。

### 指针和多维数组

​	当程序使用多维数组的名字时，也会自动将其转换成指向数组首元素的指针。

```c++
int ia[3][4];
int (*p)[4] = ia;	// p 指向含有4个元素的数组
p = &ia[2];			// p 指向ia的尾元素
```

```c++
int *p[4];	// 整型数组
int (*p)[4]; // 指向含有4个整数的数组
```

可以使用auto或者decltype去声明变量，避免在数组前面加上一个指针类型。

```c++
for(auto p = ia; p != ia + 3; ++p)
{
    for(auto q = *p; q != *p + 4; ++q)
    {
        cout << *q << ' ';
    }
    cout << endl;
}
```

使用begin和end:

```c++
for(auto p = begin(ia); p != end(ia); ++p)
{
    for(auto q = begin(*p); q != end(*p); ++q)
    {
        cout << *q << ' ';
    }
	cout << endl;
}
```

### 类型别名简化多维数组的指针

```c++
using int_array = int[4];	// 新标准下的类型别名声明，参考2.5.1节
typedef intg int_array[4];	// 等价的typedef 声明。参见2.5.1节

for(int_array *p = ia; p != ia + 3; ++p)
{
    for(int *q = *p; q != *p + 4; ++q)
    {
        cout << *q << ' ';
    }
	cout << endl;
}   
```

