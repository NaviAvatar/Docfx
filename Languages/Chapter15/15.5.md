# 15.5	访问控制与继承

​	每个类分别控制自己的成员初始化过程，与之类似，每个类还分别控制着其成员对于派生类来说是否**可访问的**。

### 受保护的成员

protected 的意思是基类只想和自己的派生类成员共享访问，而不对外开放。

* 对类用户不可访问。
* 对于派生类和友元类可访问。
* 派生类的成员或友元只能通过派生类对象来访问基类的受保护成员。派生类对于一个基类对象中的受保护成员没有任何访问权限。

当派生类中某个函数的一个参数是基类，派生类也不能在其函数中访问基类参数的 protected 成员。

### 公有、私有和受保护继承

#### 公有继承

| 公用基类成员       | 在派生类中的访问属性 |
| ------------------ | -------------------- |
| 公有成员 public    | 公有 public          |
| 保护成员 protected | 保护 protected       |
| 私有成员 private   | 不可访问             |

#### 私有继承

| 私用基类成员       | 在派生类中的访问属性 |
| ------------------ | -------------------- |
| 公有成员 public    | 私有 private         |
| 保护成员 protected | 私有 private         |
| 私有成员 private   | 不可访问             |

#### 保护继承

| 保护基类成员       | 在派生类中的访问属性 |
| ------------------ | -------------------- |
| 公有成员 public    | 保护 private         |
| 保护成员 protected | 保护 private         |
| 私有成员 private   | 不可访问             |

### 派生类向基类转换的可访问性

派生类向基类的转换是否可访问由使用该转换的代码决定，同时派生类的派生访问说明符也会有影响。假定 D 继承 B：

* 只有当 D 公有地继承 B 时，用户代码才能使用派生类向基类转换；如果 D 继承 B 的方式是受保护的或者私有的，则用户代码不能使用该转换。
* 不论 D 以什么方式继承 B ，D 的成员函数和友元都能使用派生类向基类的转换；派生类向其直接基类的类型转换对于派生类的成员和友元来说永远是可访问的。
* 如果 D 继承 B 的方式是公有的或受保护的，则 D 的派生类的成员和友元可以使用 D 向 B 的类型转换；反之，如果 D 继承 B 的方式是私有的，则不能使用。

### 改变个别成员的可访问性

在派生类中通过 using 声明可以改变派生类能够访问基类成员的访问权限。

```c++
class Base{
public:
    std::size_t size() const {return n;}
protected:
	std::size_t n;    
};

class Derived:private Base{
public:  
    using Base::size;
protected:
    using Base::n;
};
```

即使 Derived 类私有继承 Base 类，size 和 n 的访问权限都是 private 的，但是，通过 using 声明，size 变成了 public，n变成了 protected。

### 默认的继承保护级别

struct 关键字定义的派生类默认是 public 的；class 关键字定义的派生类默认时 private 的。

